#:schema node_modules/wrangler/config-schema.json
name = "rr7-cf-workers"

main = "./server.ts"
workers_dev = true
# https://developers.cloudflare.com/workers/platform/compatibility-dates
compatibility_date = "2025-03-25"

[assets]
# https://developers.cloudflare.com/workers/static-assets/binding/
directory = "./build/client"

[build]
command = "pnpm build"

[vars]
MY_VAR = "my value: production"

[[d1_databases]]
binding        = "DB"
database_name  = "rr7-cf-drizzle"
database_id    = "60c5afd2-e40b-42c2-97ff-db1e6d032f7e"
migrations_dir = "drizzle"

[env.preview]
# name = "rr7-hono-d1-drizzle" # rr7-hono-d1-drizzle-preview is generated by wrangler
                               # It's not ideal actually, but it's a workaround.

[env.preview.vars]
MY_VAR = "my value: preview"

[[env.preview.d1_databases]]
binding        = "DB"
database_name  = "rr7-cf-drizzle-preview"
database_id    = "4c1be301-79e8-494e-a335-283f973d1ab0"
migrations_dir = "drizzle"
